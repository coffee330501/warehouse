参考:

- [MySql详解（三）--锁和事务篇][https://blog.csdn.net/qq_35105015/article/details/129294685]

# MySQL锁

## MySQL锁分类

按照**锁的粒度**来说，MySQL主要包含三种类型（级别）的锁定机制：

- 全局锁：锁的是整个database。由MySQL的SQLlayer层实现的
- 表级锁：锁的是某个table。由MySQL的SQLlayer层实现的
- 行级锁：锁的是某行数据，也可能锁定行之间的间隙。由某些存储引擎实现，比如InnoDB。

表级锁和行级锁的区别：

- 表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低；

- 行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高；



按照**锁的功能**来说分为：**共享读锁和排他写锁**。



按照**锁的实现方式**分为：悲观锁和乐观锁（使用某一版本列或者唯一列进行逻辑控制）



## MySQL行级锁

MySQL的行级锁，是由存储引擎来实现的。

nnoDB行锁是通过给索引上的索引项加锁来实现的，因此InnoDB这种行锁实现特点意味着：只有通过索引条件检索的数据，InnoDB才使用行级锁，否则，InnoDB将使用表锁！